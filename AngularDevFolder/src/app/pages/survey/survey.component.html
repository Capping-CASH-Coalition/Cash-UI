<div class="container">
  <div class="row">
    <div class="col-md-10">
      <div class="well well-sm">

        <div *ngFor="let survey of globals.surveys | filterBySurveyID: currentSurveyId; let j = index">

          <div *ngFor="let question of survey.questions | paginate: config">

            <form action="surveyEnd.component.html">
              <fieldset>
                <div class="row">

                  <legend class="text-center header">Dutchess CAP Survey</legend>
                  <div class="col-lg-6" style="text-align: center; margin-left: 220px;">
                    <!--<div *ngFor="let survey of globals.surveys | filterBySurveyID: currentSurveyId">-->

                    <h3> {{ question.question_id + 1 }}. {{ question.question_text}} </h3>

                    <div [ngSwitch]="question.question_type" style="height:100px">

                      <div *ngSwitchCase="'dropdown'">
                        <select class="form-control" id="select" [(ngModel)]="selectedOptionId" name="selectedOption"
                          (change)="setSelectedOption($event, $event.target.value, 'dd')">
                          <option disabled selected>-Please Select an Option-</option>
                          <option *ngFor="let option of question.options" value="{{option.option_id}}">
                            {{ option.option_text }}
                          </option>
                        </select>
                      </div>

                      <div *ngSwitchCase="'checkboxes'">
                        <div *ngFor="let option of question.options" id="divCheckboxOptionText" (change)="setSelectedOption($event, $event.target.value, 'cb')">
                          <input class="form-check-input" type="checkbox" value="{{option.option_id}}">
                          {{ option.option_text }}
                        </div>
                      </div>

                      <div *ngSwitchCase="'text'">
                        <div class="form-check-label">
                          <textarea class="form-control" name="text" rows="2" [(ngModel)]="textAreaValue"></textarea>
                        </div>
                      </div>

                      <div *ngSwitchCase="'mc'">
                        <div *ngFor="let option of question.options" id="radioBoxOptionText" (change)="setSelectedOption($event, $event.target.value, 'mc')">
                          <input type="radio" class="form-check-input" name="question.question_id" value="{{option.option_id}}">
                          {{ option.option_text }}
                        </div>
                      </div>

                    </div>
                  </div>
                </div>
                <pagination-template #p="paginationApi" [id]="config.id" (pageChange)="config.currentPage = $event">
                  <div class="custom-pagination">
                    <div class="pagination-previous" [class.disabled]="p.isFirstPage()">
                      <a *ngIf="!p.isFirstPage()" (click)="removeResponse(getQuestionIndex(question.question_id, p.getCurrent())); p.previous();"> Previous </a>
                    </div>

                    <div *ngFor="let page of p.pages" [class.current]="p.getCurrent() === page.value">
                      <ul>
                        <li class="pageNumbers" *ngIf="p.getCurrent() !== page.value">
                          <span>{{ page.label }}</span>
                        </li>
                        <li class="pageNumberActive" *ngIf="p.getCurrent() === page.value">
                          <span>{{ page.label }}</span>
                        </li>
                      </ul>
                      
                    </div>

                    <div class="pagination-next" [class.disabled]="p.isLastPage()">
                      <a *ngIf="!p.isLastPage()" (click)="updateResponses(textAreaValue, getQuestionIndex(question.question_id)); p.next()"> Next </a>
                      <a *ngIf="p.isLastPage()" (click)="updateResponses(textAreaValue, getQuestionIndex(question.question_id)); postOnSubmit();"> Submit </a>
                    </div>
                  </div>
                </pagination-template>

              </fieldset>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>