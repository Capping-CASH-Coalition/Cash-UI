<!-- Survey Landing/Home page -->
<body>
  <div class="container" id="container2" style="margin: 0 auto" *ngIf="!showSurveyDiv">
    <button class="btn btn-default" id="loginBtn" *ngIf="!auth.isAuthenticated()" (click)="auth.login()">
      Login
    </button>
    <div class="row">
      <div class="col-md-7" id="bucket">
        <div class="well well-sm">
          <h1>Welcome to Dutchess CAP</h1>
          <p class="text-center header3">Please select the survey you would like to take:</p>

          <select class="form-control" id="select" (change)="surveySelect($event, $event.target.value)">
            <option disabled selected>-Please Select a Survey-</option>
            <option *ngFor="let surveyActive of surveys" value="{{surveyActive.survey_id}}">{{surveyActive.survey_name}}</option>
          </select>

          <div class="form-group">
            <div class="col-md-12 text-center">
              <button type="button" id="btn" class="btn btn-primary btn-lg" (click)="onStart()">Start</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="container" id="wrapper" *ngIf="showSurveyDiv">
    <div id="ctr">
      <div class="row">
        <div class="col-lg-11 ibox float-e-margins">
          <div class="ibox-content">
            <div class="feed-activity-list">
              <!-- Survey Landing/Home page -->
              <div class="container" id="container2" style="margin: 0 auto" *ngIf="!showSurveyDiv">
                <button class="btn btn-default" id="loginBtn" *ngIf="!auth.isAuthenticated()" (click)="auth.login()">
                  Login
                </button>
                <div class="row">
                  <div class="col-md-7" id="bucket">
                    <div class="well well-sm">
                      <legend class="text-center header">Welcome to Dutchess CAP</legend>
                      <p class="text-center header3">Please select the survey you would like to take:</p>

                      <form class="form-horizontal" method="post" #start="ngForm" validate>
                        <select class="form-control" id="select" (change)="surveySelect($event, $event.target.value)">
                          <option disabled selected>-Please Select a Survey-</option>
                          <option *ngFor="let surveyActive of surveys" value="{{surveyActive.survey_id}}">{{surveyActive.survey_name}}</option>
                        </select>

                        <div class="form-group">
                          <div class="col-md-12 text-center">
                            <button type="submit" id="btn" class="btn btn-primary btn-lg" (click)="onStart()">Start</button>
                          </div>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>

              </div>
              <form>
                <div *ngFor="let survey of surveys | filterBySurveyID: selectedSurveyId">
                  <div class="row" *ngFor="let question of survey.questions; let k = index">
                    <div [hidden]="hideQuestion(k)" id="topSpacing">
                      <div class="col-lg-4" style="margin-left:40px">
                        <span class="spanQuestion">
                          {{ k+1 }} . <span class="spanQuestionText">
                            {{
                              survey.questions[k].question_text
                            }}
                          </span>
                        </span>
                      </div>
                      <div class="col-lg-7">
                        <div [ngSwitch]="question.question_type" id="bottomSpacing">

                          <div *ngSwitchCase="'select'">
                            <select [(ngModel)]="question.response" [ngModelOptions]="{standalone: true}" (change)='valueChanges(survey.survey_id,question.question_id,question.options, question.response )'
                                    class="form-control">
                              <option *ngFor="let option of question.options" [value]="option.option_id">

                                {{ option.option_text }}
                              </option>
                            </select>
                          </div>
                          <div *ngSwitchCase="'checkbox'">
                            <div *ngFor="let option of question.options; let j = index">
                              <label class="form-check-label">
                                <input class="form-check-input" (change)="updateCheckbox(question, option.option_text, $event.target.checked, option.option_id, survey.survey_id)"
                                       type="checkbox" [value]="option.option_text">
                                <span class="spanOption">{{ option.option_text }}</span>
                              </label>
                            </div>
                          </div>
                          <div *ngSwitchCase="'text'">
                            <div *ngFor="let option of question.options">
                              <label class="form-check-label"></label>
                              <textarea class="form-control" (change)='valueChanges(survey.survey_id, question.question_id, option.option_id, question.response)'
                                        [(ngModel)]='question.response' [ngModelOptions]='{standalone: true}' rows="3"></textarea>
                            </div>
                          </div>
                          <div *ngSwitchCase="'radio'">
                            <div *ngFor="let option of question.options">
                              <label class="check-label">
                                <!--  [(ngModel)]="surveys.responses[k]"-->
                                <input type="radio" (change)='valueChanges(survey.survey_id, question.question_id,option.option_id, option.option_text)'
                                       [(ngModel)]="question.response" [ngModelOptions]="{standalone: true}" class="form-check-input"
                                       [name]="'radio'+question.question_id" [value]="option.option_text">
                                <span class="spanOption">{{ option.option_text }}</span>
                              </label>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-lg-12">
                      <button *ngIf="!isFirstPage()" type="button" class="btn btn-primary pull-left btn-sm" (click)='onPrevious()'> Previous </button>
                      <button type="button" *ngIf="!isLastPage()" class="btn btn-primary pull-right btn-sm" (click)='onNext()'> Next </button>
                      <button [disabled]="disabledSave" id="save" type="button" *ngIf="isLastPage()" class="btn btn-primary pull-right btn-sm" (click)='save()'> Save </button>
                    </div>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>